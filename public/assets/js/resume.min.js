/*!
 * Copyright 2023
 * Licensed under MIT
 */

// Smooth scrolling for anchor links with the class `.js-scroll-trigger`
document.querySelectorAll('a.js-scroll-trigger[href*="#"]:not([href="#"])').forEach(anchor => {
    anchor.addEventListener("click", function (e) {
        e.preventDefault();

        const pathname = window.location.pathname.replace(/^\//, "");
        const hostname = window.location.hostname;

        if (
            pathname === this.pathname.replace(/^\//, "") &&
            hostname === this.hostname
        ) {
            let target = document.querySelector(this.hash);

            if (!target) {
                target = document.querySelector(`[name=${this.hash.slice(1)}]`);
            }

            if (target) {
                window.scrollTo({
                    top: target.offsetTop,
                    behavior: "smooth"
                });
            }
        }
    });
});

// Close responsive menu when a scroll trigger link is clicked
document.querySelectorAll(".js-scroll-trigger").forEach(trigger => {
    trigger.addEventListener("click", () => {
        const navbarCollapse = document.querySelector(".navbar-collapse");
        if (navbarCollapse.classList.contains("show")) {
            const bsCollapse = new bootstrap.Collapse(navbarCollapse);
            bsCollapse.hide();
        }
    });
});

// Activate scrollspy to add active class to navbar items on scroll
const sideNav = document.getElementById("sideNav");
if (sideNav) {
    new bootstrap.ScrollSpy(document.body, {
        target: "#sideNav",
        offset: 100,
    });
}
